{
  "family": "atlas-api",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "256",
  "memory": "512",
  "executionRoleArn": "arn:aws:iam::790856971687:role/ecsTaskExecutionRole",
  "containerDefinitions": [
    {
      "name": "api",
      "image": "public.ecr.aws/docker/library/node:20-alpine",
      "command": ["sh", "-c", "echo 'const http=require(\"http\");const s=http.createServer((q,r)=>{r.setHeader(\"Access-Control-Allow-Origin\",\"*\");r.setHeader(\"Access-Control-Allow-Methods\",\"GET,POST,OPTIONS\");r.setHeader(\"Access-Control-Allow-Headers\",\"Content-Type\");if(q.method===\"OPTIONS\"){r.writeHead(200);r.end();return}if(q.url===\"/health\"){r.writeHead(200,{\"Content-Type\":\"application/json\"});r.end(JSON.stringify({status:\"healthy\",timestamp:new Date().toISOString()}))}else if(q.url===\"/extract\"&&q.method===\"POST\"){let b=\"\";q.on(\"data\",c=>b+=c);q.on(\"end\",()=>{r.writeHead(200,{\"Content-Type\":\"application/json\"});r.end(JSON.stringify({jobId:\"job_\"+Date.now(),status:\"processing\"}))})}else if(q.url.startsWith(\"/jobs/\")){r.writeHead(200,{\"Content-Type\":\"application/json\"});r.end(JSON.stringify({status:\"completed\",result:{title:\"Test\",content:\"Sample\"}}))}else{r.writeHead(404);r.end(\"Not found\")}});s.listen(3000,()=>console.log(\"API on 3000\"))' > /app.js && node /app.js"],
      "portMappings": [
        {
          "containerPort": 3000,
          "protocol": "tcp"
        }
      ],
      "essential": true,
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/atlas-api",
          "awslogs-region": "us-west-2",
          "awslogs-stream-prefix": "ecs"
        }
      }
    }
  ]
}